# RTS SELF EVOLUTION TRIGGER
(Self-Improvement Trigger Ruleset)

## PURPOSE
RTS detects repeated friction / overload / stall patterns from logs and proposes concrete system improvements.
RTS does not auto-apply changes. Human operator approves.

Outputs:
- evolution/ACTIVE_PROPOSALS.md (new proposals)
- evolution/PROPOSALS.md (approved/moved proposals)

---

## INPUTS (signals)
RTS reads signals from:
- logs/EXECUTION_LOG.md
- logs/RESULT_LOG.md
- logs/BLOCK_*.md
- logs/RTS_METRICS.md (operator workload / excitement etc.)
- GitHub commits (optional signal)

---

## CORE RULE
When ANY trigger condition is met AND cooldown allows,
RTS MUST append a proposal to: evolution/ACTIVE_PROPOSALS.md

Proposal must be:
- actionable (what to change)
- minimal scope (smallest next step)
- reversible (document-only first, then code)

---

## COOLDOWN / DEDUPE
To prevent proposal spam:

### Global Cooldown
- 1 proposal per 60 minutes (unless CRITICAL trigger)

### Per-Trigger Cooldown
- Same trigger type: 24 hours

### Dedupe Rule
If an ACTIVE proposal already contains similar intent keywords, do not add a new one.
Instead append a short "Evidence update" section to the existing proposal.

Similarity keywords (example):
- AUTO-CUT / logging / workload / stall / repeated fix / external publish / commit loop

---

## TRIGGER CONDITIONS (any triggers)

### T1: Repeated Similar BLOCK Context (>=3)
Condition:
- Similar topic/intent appears across 3 BLOCKs within 7 days
Meaning:
- Systemic pattern; needs automation or template

Output suggestion:
- Propose template, shortcut, or automation to reduce repeated manual work

---

### T2: Frequent Manual Corrections (>=3 in 24h)
Condition:
- "fix", "retry", "error", "rework" patterns appear 3+ times in EXECUTION_LOG/RESULT_LOG
Meaning:
- Tooling gap or missing guardrail

Output suggestion:
- Add validation checklist / lint rule / safer operational flow

---

### T3: Workload Risk Repeated (Workload Score >=4 occurs 2x in 6h)
Condition:
- RTS_METRICS shows Workload Score >=4 twice within 6 hours
Meaning:
- Operator overload risk

Output suggestion:
- Recommend pause / reduce scope / enable AUTO-CUT prompt frequency increase
Priority:
- HIGH

---

### T4: AUTO-CUT Triggered Frequently (>=2 in 4h)
Condition:
- AUTO-CUT runtime suggested/triggered 2+ times within 4 hours
Meaning:
- Session density high; reduce interruptions or split work

Output suggestion:
- Propose structured chunk plan + enforced mini-breaks (advisory)

---

### T5: External Integration Added (GitHub/Stripe/Gumroad/etc detected)
Condition:
- New external action detected (publish/submission/payment/DM/email) OR commit indicates integration
Meaning:
- New workflow risk; needs governance update

Output suggestion:
- Propose governance rule update + audit logging

---

### T6: Stall Detected (no forward progress + repeated corrections)
Condition:
- No meaningful progress marker for 24h AND corrections appear
Meaning:
- Direction review needed

Output suggestion:
- Propose "Direction Review BLOCK" + alternative plan options

---

### T7: CRITICAL Safety Trigger
Condition:
- Workload Score == 5 OR strong stress signals + repeated loops
Meaning:
- Immediate health protection

Output:
- Proposal type: SAFETY OVERRIDE (advisory)
Cooldown bypass:
- allowed (CRITICAL only)

---

## PROPOSAL FORMAT (append-only)
RTS must append using this format:

---
## PROPOSAL_<NNNN>

### TITLE
<short action title>

### STATUS
PENDING

### GENERATED BY
RTS SELF EVOLUTION TRIGGER

### DATE
YYYY-MM-DD (JST)

### TRIGGER
<T1/T2/...>

### EVIDENCE
- <log pointer / summary>
- <log pointer / summary>

### PROPOSAL
Implement:
- <smallest next step 1>
- <smallest next step 2>

### EXPECTED EFFECT
- <risk reduced / speed improved / fatigue lowered>

### SAFETY
Operator final authority retained.
If workload risk increases: recommend pause or BLOCK logging.

### HUMAN RESPONSE
APPROVE -> move to evolution/PROPOSALS.md and start implementation
REJECT  -> keep record + write rejection reason
LATER(30) -> postpone reminder

---

## APPROVAL MECHANISM (manual)
Operator edits ACTIVE_PROPOSALS.md:
- Change STATUS: PENDING -> APPROVED
- Fill:
  - Approved by:
  - Approval reason:

Then operator moves the approved proposal block to:
- evolution/PROPOSALS.md

---

## OPERATOR COMMANDS (text protocol)
- "PROPOSE"  -> force one proposal generation (if any trigger is available)
- "STATE CHECK" -> run STATE ENGINE evaluation
- "CUT" / "SKIP" / "LATER(30)" -> per AUTO-CUT runtime protocol

---

Operator: RTS Core
Trigger Ruleset Status: ACTIVE
